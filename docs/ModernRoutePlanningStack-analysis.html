<!--
Palette Plan: Energetic & Playful (#FF6B6B, #FFD166, #06D6A0, #118AB2, #073B4C)

Narrative Plan:
1.  Title: The Modern Route Planning Stack: A Developer's Guide.
2.  Introduction: Hook - "Route planning is more than just A-to-B. It's a complex puzzle of constraints, preferences, and optimization." Define the core components.
3.  Section 1: The Core Problem - Optimization Trade-offs: Visualize the "time vs. distance vs. cost" trade-off.
4.  Section 2: Defining the Route - Key Parameters: Break down user inputs (Constraints, Preferences, Modes).
5.  Section 3: The Toolkit - APIs & Libraries: Compare major mapping/routing providers (Google, Mapbox, HERE) and open-source options.
6.  Section 4: Advanced Routing - Defining "Scenic": Focus on "scenic routes" and how this is a data-weighting problem.
7.  Section 5: System Architecture (How-to): A high-level flowchart of a routing request.
8.  Conclusion: Key takeaways - "Best practice is a hybrid approach, blending powerful APIs with custom data."

Visualization Selection Plan:
1.  Data: Optimization Trade-offs (Time, Distance, Cost)
    Goal: Compare
    Viz: Radar Chart
    Justification: Perfect for comparing multiple variables (time, distance, cost) across a few "profiles" ("Fastest," "Shortest," "Cheapest").
    Method: Chart.js (Canvas). NO SVG.
2.  Data: User Input Parameters (Modes, Constraints, Preferences)
    Goal: Organize
    Viz: Grouped Lists (HTML/CSS)
    Justification: Simple, clear way to categorize the different types of inputs.
    Method: Structured HTML/CSS with Tailwind (cards, lists). NO SVG.
3.  Data: Mapping API Provider Comparison (Features)
    Goal: Compare
    Viz: Grouped Bar Chart
    Justification: Compare key features (e.g., Geocoding, Routing, Traffic, Pricing Model) across major providers (Google, Mapbox, HERE).
    Method: Chart.js (Canvas). Will require label wrapping for "Pricing Model." NO SVG.
4.  Data: Data Layers for "Scenic Route"
    Goal: Organize / Compare
    Viz: Stacked Bar Chart
    Justification: Show that a "scenic score" is composed of multiple weighted data layers (e.g., Topography, POI Density, Greenery, Low Traffic).
    Method: Chart.js (Canvas). NO SVG.
5.  Data: High-Level Routing System Flow
    Goal: Organize
    Viz: Flow Chart
    Justification: Show the process from User Request -> Geocoding -> Graph Building -> Algorithm (Dijkstra/A*) -> Route Response.
    Method: Structured HTML/CSS with Tailwind (flexbox, borders, unicode arrows). NO SVG, NO MERMAID JS.

Confirmation: NEITHER Mermaid JS NOR SVG were used in this file. All charts are rendered via Chart.js to a Canvas. The flowchart is built with HTML and Tailwind CSS.
-->
<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Modern Route Planning Stack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .flow-step {
            @apply bg-white rounded-lg shadow-md p-4 text-center min-h-[60px] flex items-center justify-center;
        }
        .flow-arrow {
            @apply text-3xl text-gray-400 flex items-center justify-center mx-2;
        }
    </style>
</head>
<body class="text-[#073B4C]">

    <header class="bg-[#118AB2] text-white p-8 text-center rounded-bl-3xl rounded-br-3xl shadow-lg">
        <h1 class="text-4xl md:text-5xl font-bold mb-2">The Modern Route Planning Stack</h1>
        <p class="text-xl md:text-2xl font-light text-gray-200">A Developer's Guide to Building Advanced Routing Systems</p>
    </header>

    <main class="container mx-auto p-4 md:p-8">
        
        <section class="my-12">
            <h2 class="text-3xl font-bold text-center mb-4">It's More Than Just A-to-B</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-700">
                Modern trip planning is a complex puzzle. Users expect more than just the shortest path; they want routes that match their preferences, avoid constraints, and optimize for different goals. This guide breaks down the core components, tools, and best practices for building a sophisticated routing application.
            </p>
        </section>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 lg:col-span-1">
                <h3 class="text-2xl font-bold mb-4 text-[#118AB2]">1. The Core Problem: Optimization</h3>
                <p class="text-gray-700 mb-4">
                    The first challenge is balancing trade-offs. A user's "best" route depends on their priority: time, distance, or cost (tolls, fuel). An effective system must be able to calculate and present these different profiles.
                </p>
                <div class="chart-container">
                    <canvas id="optimizationRadarChart"></canvas>
                </div>
                <p class="text-sm text-gray-600 mt-4 text-center">
                    A radar chart shows how different route profiles ("Fastest," "Shortest," "Eco-Friendly") score against competing metrics.
                </p>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2">
                <h3 class="text-2xl font-bold mb-4 text-[#118AB2]">2. Defining the Route: Key Parameters</h3>
                <p class="text-gray-700 mb-6">
                    A robust system categorizes user inputs into three main types. These parameters form the query that your routing engine must solve.
                </p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div class="border-l-4 border-[#FF6B6B] bg-red-50 p-4 rounded-r-lg">
                        <h4 class="text-xl font-semibold mb-2 text-[#FF6B6B]">Travel Modes</h4>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            <li>Driving (Car, Truck)</li>
                            <li>Cycling (Road, Mountain)</li>
                            <li>Walking / Hiking</li>
                            <li>Public Transit</li>
                            <li>Multi-modal</li>
                        </ul>
                    </div>
                    <div class="border-l-4 border-[#FFD166] bg-yellow-50 p-4 rounded-r-lg">
                        <h4 class="text-xl font-semibold mb-2 text-[#E7B000]">Constraints (Avoid)</h4>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            <li>Tolls</li>
                            <li>Highways</li>
                            <li>Ferries</li>
                            <li>Borders</li>
                            <li>Difficult Turns</li>
                        </ul>
                    </div>
                    <div class="border-l-4 border-[#06D6A0] bg-green-50 p-4 rounded-r-lg">
                        <h4 class="text-xl font-semibold mb-2 text-[#05A078]">Preferences (Prioritize)</h4>
                        <ul class="list-disc list-inside text-gray-700 space-y-1">
                            <li>Scenic Routes</li>
                            <li>Historical Sites</li>
                            <li>Most Fuel-Efficient</li>
                            <li>Fewest Stops</li>
                            <li>Use Bike Lanes</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2 lg:col-span-3">
                <h3 class="text-2xl font-bold mb-4 text-[#118AB2]">3. The Toolkit: APIs vs. Open Source</h3>
                <p class="text-gray-700 mb-6">
                    You don't have to build the core routing algorithm from scratch. The primary choice is between commercial APIs (for speed and rich data) and open-source engines (for control and custom costs).
                </p>
                <div class="chart-container h-96 max-h-[500px] md:max-w-4xl md:h-[450px]">
                    <canvas id="apiComparisonChart"></canvas>
                </div>
                <p class="text-sm text-gray-600 mt-4 text-center">
                    Commercial providers bundle key services like geocoding, real-time traffic, and specialized routing (trucking, EV) into one platform.
                </p>
            </div>

            <div class="bg-white rounded-lg shadow-lg p-6 md:col-span-2">
                <h3 class="text-2xl font-bold mb-4 text-[#118AB2]">4. Advanced Routing: Defining "Scenic"</h3>
                <p class="text-gray-700 mb-4">
                    Features like "scenic routes" are not magic. They are data problems. A "scenic score" is calculated by layering and weighting different data sets onto the road network. Roads with higher scores are prioritized by the algorithm.
                </p>
                <div class="chart-container h-80 max-h-[400px] md:max-w-xl">
                    <canvas id="scenicRouteChart"></canvas>
                </div>
                <p class="text-sm text-gray-600 mt-4 text-center">
                    This chart shows how a single route's "scenic score" is a composite of multiple weighted data factors.
                </p>
            </div>
            
            <div class="bg-white rounded-lg shadow-lg p-6 lg:row-start-2 lg:col-start-3">
                <h3 class="text-2xl font-bold mb-4 text-[#118AB2]">Open Source Trade-offs</h3>
                <p class="text-gray-700 mb-4">
                    Open-source engines like OSRM or GraphHopper offer immense power but require you to host and manage the underlying OpenStreetMap (OSM) data, which is a significant operational task.
                </p>
                <div class="chart-container h-64 max-h-[300px] md:h-72">
                    <canvas id="openSourceDonut"></canvas>
                </div>
                 <p class="text-sm text-gray-600 mt-4 text-center">
                    This conceptual donut illustrates the primary trade-off: OSRM gives maximum control, while APIs offer maximum ease of use.
                </p>
            </div>

        </div>

        <section class="my-12">
            <h2 class="text-3xl font-bold text-center mb-6">5. High-Level System Architecture</h2>
            <p class="text-lg text-center max-w-3xl mx-auto text-gray-700 mb-8">
                A typical routing request follows a clear data pipeline. The core logic involves converting user-friendly addresses into map coordinates (geocoding) and then finding the optimal path on a "graph" representation of the road network.
            </p>
            
            <div class="flex flex-col md:flex-row items-center justify-center space-y-4 md:space-y-0 md:space-x-4">
                <div class="flow-step w-4/5 md:w-48 shadow-[#FF6B6B]/30">User Request<br>(Start, End, Prefs)</div>
                <div class="flow-arrow transform md:rotate-0">→</div>
                <div class="flow-step w-4/5 md:w-48 shadow-[#FFD166]/30">Geocoding<br>(Address to Lat/Lng)</div>
                <div class="flow-arrow transform md:rotate-0">→</div>
                <div class="flow-step w-4/5 md:w-48 shadow-[#06D6A0]/30">Build Graph<br>(Apply Weights & Constraints)</div>
                <div class="flow-arrow transform md:rotate-0">→</div>
                <div class="flow-step w-4/5 md:w-48 shadow-[#118AB2]/30">Run Algorithm<br>(e.g., Dijkstra, A*)</div>
                <div class="flow-arrow transform md:rotate-0">→</div>
                <div class="flow-step w-4/5 md:w-48 shadow-gray-400/30">Route Response<br>(Polyline & Maneuvers)</div>
            </div>
        </section>

        <footer class="mt-16 pt-8 border-t border-gray-200 text-center">
            <h3 class="text-2xl font-bold text-[#073B4C] mb-2">Key Takeaway</h3>
            <p class="text-lg text-gray-700 max-w-3xl mx-auto">
                The best practice is often a hybrid approach. Use commercial APIs for their rich, real-time data (like traffic and geocoding), but feed their output into your own system where you can apply custom business logic and advanced preferences (like scenic scoring) that APIs don't offer out-of-the-box.
            </p>
        </footer>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {

            const energeticPlayful = {
                red: '#FF6B6B',
                yellow: '#FFD166',
                green: '#06D6A0',
                blue: '#118AB2',
                darkBlue: '#073B4C',
                lightGray: '#f8fafc',
                text: '#073B4C'
            };

            const processLabel = (label) => {
                if (label.length > 16) {
                    const words = label.split(' ');
                    const lines = [];
                    let currentLine = '';
                    for (const word of words) {
                        if ((currentLine + word).length > 16) {
                            lines.push(currentLine.trim());
                            currentLine = word + ' ';
                        } else {
                            currentLine += word + ' ';
                        }
                    }
                    lines.push(currentLine.trim());
                    return lines;
                }
                return label;
            };
            
            const tooltipTitleCallback = (tooltipItems) => {
                const item = tooltipItems[0];
                let label = item.chart.data.labels[item.dataIndex];
                if (Array.isArray(label)) {
                    return label.join(' ');
                } else {
                    return label;
                }
            };
            
            const commonChartOptions = {
                maintainAspectRatio: false,
                responsive: true,
                plugins: {
                    tooltip: {
                        callbacks: {
                            title: tooltipTitleCallback
                        }
                    },
                    legend: {
                        labels: {
                            color: energeticPlayful.text
                        }
                    }
                },
                scales: {
                    y: {
                        ticks: { color: energeticPlayful.text },
                        grid: { color: '#e2e8f0' }
                    },
                    x: {
                        ticks: { color: energeticPlayful.text },
                        grid: { color: '#e2e8f0' }
                    }
                }
            };

            if (document.getElementById('optimizationRadarChart')) {
                new Chart(document.getElementById('optimizationRadarChart'), {
                    type: 'radar',
                    data: {
                        labels: ['Shortest Time', 'Shortest Distance', 'Lowest Cost', 'Least Complexity'],
                        datasets: [
                            {
                                label: 'Fastest Route',
                                data: [10, 4, 3, 6],
                                fill: true,
                                backgroundColor: 'rgba(255, 107, 107, 0.2)',
                                borderColor: energeticPlayful.red,
                                pointBackgroundColor: energeticPlayful.red,
                            },
                            {
                                label: 'Shortest Route',
                                data: [5, 10, 5, 8],
                                fill: true,
                                backgroundColor: 'rgba(6, 214, 160, 0.2)',
                                borderColor: energeticPlayful.green,
                                pointBackgroundColor: energeticPlayful.green,
                            },
                            {
                                label: 'Eco-Friendly',
                                data: [7, 7, 9, 9],
                                fill: true,
                                backgroundColor: 'rgba(255, 209, 102, 0.2)',
                                borderColor: energeticPlayful.yellow,
                                pointBackgroundColor: energeticPlayful.yellow,
                            }
                        ]
                    },
                    options: {
                        maintainAspectRatio: false,
                        responsive: true,
                        plugins: {
                            tooltip: {
                                callbacks: {
                                    title: (tooltipItems) => {
                                        return tooltipItems[0].chart.data.labels[tooltipItems[0].dataIndex];
                                    }
                                }
                            }
                        },
                        scales: {
                            r: {
                                beginAtZero: true,
                                max: 10,
                                pointLabels: {
                                    color: energeticPlayful.text
                                },
                                ticks: {
                                    color: energeticPlayful.text,
                                    backdropColor: energeticPlayful.lightGray,
                                    stepSize: 2
                                },
                                grid: { color: '#e2e8f0' }
                            }
                        }
                    }
                });
            }

            if (document.getElementById('apiComparisonChart')) {
                const apiLabels = ['Geocoding Quality', 'Real-time Traffic', 'Routing Features', 'Cost Model', 'Customization'];
                
                new Chart(document.getElementById('apiComparisonChart'), {
                    type: 'bar',
                    data: {
                        labels: apiLabels.map(processLabel),
                        datasets: [
                            {
                                label: 'Google Maps',
                                data: [9, 9, 8, 5, 6],
                                backgroundColor: energeticPlayful.red,
                            },
                            {
                                label: 'Mapbox',
                                data: [8, 7, 9, 8, 9],
                                backgroundColor: energeticPlayful.blue,
                            },
                            {
                                label: 'HERE Technologies',
                                data: [7, 8, 9, 7, 7],
                                backgroundColor: energeticPlayful.green,
                            }
                        ]
                    },
                    options: {
                        ...commonChartOptions,
                        scales: {
                            y: { ...commonChartOptions.scales.y, beginAtZero: true, max: 10 },
                            x: { ...commonChartOptions.scales.x }
                        }
                    }
                });
            }

            if (document.getElementById('scenicRouteChart')) {
                new Chart(document.getElementById('scenicRouteChart'), {
                    type: 'bar',
                    data: {
                        labels: ['Route Segment A', 'Route Segment B', 'Route Segment C'],
                        datasets: [
                            {
                                label: 'Topography (Hills)',
                                data: [3, 5, 2],
                                backgroundColor: energeticPlayful.green,
                            },
                            {
                                label: 'Points of Interest',
                                data: [4, 2, 5],
                                backgroundColor: energeticPlayful.yellow,
                            },
                            {
                                label: 'Low Traffic',
                                data: [2, 2, 4],
                                backgroundColor: energeticPlayful.blue,
                            },
                            {
                                label: 'Greenery / Parks',
                                data: [5, 1, 3],
                                backgroundColor: '#58D68D',
                            }
                        ]
                    },
                    options: {
                        ...commonChartOptions,
                        scales: {
                            y: { ...commonChartOptions.scales.y, stacked: true, beginAtZero: true },
                            x: { ...commonChartOptions.scales.x, stacked: true }
                        }
                    }
                });
            }
            
            if (document.getElementById('openSourceDonut')) {
                new Chart(document.getElementById('openSourceDonut'), {
                    type: 'doughnut',
                    data: {
                        labels: ['Full Control & Customization', 'Operational Overhead', 'Ease of Use', 'Data Richness (e.g. Traffic)'],
                        datasets: [{
                            label: 'Open Source (OSRM)',
                            data: [45, 30, 0, 0],
                            backgroundColor: [energeticPlayful.green, energeticPlayful.red],
                            hidden: true
                        },
                        {
                            label: 'Commercial API (Google)',
                            data: [0, 0, 40, 35],
                            backgroundColor: [energeticPlayful.blue, energeticPlayful.yellow]
                        }]
                    },
                    options: {
                         maintainAspectRatio: false,
                         responsive: true,
                         plugins: {
                            tooltip: {
                                callbacks: {
                                    title: (tooltipItems) => {
                                        return tooltipItems[0].chart.data.labels[tooltipItems[0].dataIndex];
                                    }
                                }
                            },
                            legend: {
                                position: 'bottom',
                                labels: {
                                    color: energeticPlayful.text,
                                    boxWidth: 20,
                                    padding: 20
                                }
                            }
                         }
                    }
                });
            }

        });
    </script>
</body>
</html>
